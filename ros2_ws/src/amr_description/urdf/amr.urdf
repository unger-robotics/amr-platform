<?xml version="1.0"?>
<!--
  AMR Robot Description
  
  TF-Baum:
    odom → base_footprint → base_link → laser
  
  Frames:
    - base_footprint: Projektion auf Boden (z=0)
    - base_link: Chassis-Mitte
    - laser: RPLidar A1 Scan-Ursprung
  
  Maße TODO: Mit echtem Roboter abmessen und anpassen!
-->
<robot name="amr">

  <!-- ==================== LINKS ==================== -->

  <!-- base_footprint: Projektion auf Boden -->
  <link name="base_footprint"/>

  <!-- base_link: Chassis -->
  <link name="base_link">
    <visual>
      <geometry>
        <box size="0.20 0.18 0.05"/>
      </geometry>
      <origin xyz="0 0 0" rpy="0 0 0"/>
      <material name="chassis_blue">
        <color rgba="0.2 0.2 0.8 1.0"/>
      </material>
    </visual>
    <collision>
      <geometry>
        <box size="0.20 0.18 0.05"/>
      </geometry>
      <origin xyz="0 0 0" rpy="0 0 0"/>
    </collision>
  </link>

  <!-- laser: RPLidar A1 -->
  <link name="laser">
    <visual>
      <geometry>
        <cylinder radius="0.035" length="0.025"/>
      </geometry>
      <origin xyz="0 0 0" rpy="0 0 0"/>
      <material name="lidar_black">
        <color rgba="0.1 0.1 0.1 1.0"/>
      </material>
    </visual>
    <collision>
      <geometry>
        <cylinder radius="0.035" length="0.025"/>
      </geometry>
      <origin xyz="0 0 0" rpy="0 0 0"/>
    </collision>
  </link>

  <!-- ==================== JOINTS ==================== -->

  <!-- 
    Joint: base_footprint → base_link
    z-Offset: Höhe des Chassis über Boden
    TODO: Messen! (Rad-Radius + Chassis-Dicke/2)
  -->
  <joint name="base_footprint_to_base_link" type="fixed">
    <parent link="base_footprint"/>
    <child link="base_link"/>
    <origin xyz="0 0 0.05" rpy="0 0 0"/>
  </joint>

  <!-- 
    Joint: base_link → laser
    x: LiDAR vor/hinter Chassis-Mitte (positiv = vorne)
    y: LiDAR links/rechts (0 = mittig)
    z: LiDAR über Chassis-Mitte
    yaw: Falls LiDAR gedreht montiert (0 oder π)
    TODO: Messen!
  -->
  <joint name="base_link_to_laser" type="fixed">
    <parent link="base_link"/>
    <child link="laser"/>
    <origin xyz="0.08 0 0.08" rpy="0 0 0"/>
  </joint>

</robot>
